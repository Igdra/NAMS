<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>NAMS - Not Another MUD Server: SocketServer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.htm"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.htm"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.htm"><span>Classes</span></a></li>
      <li><a href="files.htm"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.htm"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.htm"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.htm"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.htm"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<h1>SocketServer Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="SocketServer" --><!-- doxytag: inherits="Socket" -->
<p><code>#include &lt;<a class="el" href="socketserver_8h_source.htm">socketserver.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png"/> Inheritance diagram for SocketServer:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classSocketServer__inherit__graph.png" border="0" usemap="#SocketServer_inherit__map" alt="Inheritance graph"/></div>
<map name="SocketServer_inherit__map" id="SocketServer_inherit__map">
<area shape="rect" id="node2" href="classSocket.htm" title="Socket" alt="" coords="25,83,92,112"/><area shape="rect" id="node4" href="classThread.htm" title="Thread" alt="" coords="25,5,92,35"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.htm">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png"/> Collaboration diagram for SocketServer:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classSocketServer__coll__graph.png" border="0" usemap="#SocketServer_coll__map" alt="Collaboration graph"/></div>
<map name="SocketServer_coll__map" id="SocketServer_coll__map">
<area shape="rect" id="node6" href="classServer.htm" title="Server" alt="" coords="27,261,91,291"/><area shape="rect" id="node2" href="classSocket.htm" title="Socket" alt="" coords="25,85,92,115"/><area shape="rect" id="node4" href="classThread.htm" title="Thread" alt="" coords="25,5,92,35"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.htm">legend</a>]</span></center></div>

<p><a href="classSocketServer-members.htm">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSocketServer.htm#ad7fde891ef174c336b46299c8ace88f4">SocketServer</a> (<a class="el" href="classServer.htm">Server</a> *server, const <a class="el" href="limits_8h.htm#a95d88c395560ef694e6258da742ad660">sint_t</a> &amp;descriptor)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSocketServer.htm#af0e595690e453ef4b8e8da174069aba9">~SocketServer</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSocketServer.htm#afdbc60c3bc840875d2214b59c6213f63">Accept</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSocketServer.htm#aee14cfe29fef99baa29664eef8d89dc8">Bind</a> (const <a class="el" href="limits_8h.htm#a12a1e9b3ce141648783a82445d02b58d">uint_t</a> &amp;port, const string &amp;addr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSocketServer.htm#a4fb2589ed01cea5daae154b2f06b4f41">Delete</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSocketServer.htm#a5c5b0cbbee6a2e265d0510b40bcc12d8">Listen</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSocketServer.htm#a276e17da8bbf562313bce8edfd32e231">New</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSocketServer.htm#a613401f64ca4c185e0a90dd2ae57b546">Thread</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classServer.htm">Server</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSocketServer.htm#a659e5775db60e3f8d29b70f2fdd317e7">gServer</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSocketServer.htm#a89cde9791b2f0ce928329c55a9ad21e7">sServer</a> (<a class="el" href="classServer.htm">Server</a> *server)</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSocketServer.htm#abf0a57a793cb3cf9ad308c238329b690">Update</a> (void *data)</td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classServer.htm">Server</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSocketServer.htm#abe9a0d62586891e9d8449c0f4d1ca97b">m_server</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>

<p>Definition at line <a class="el" href="socketserver_8h_source.htm#l00023">23</a> of file <a class="el" href="socketserver_8h_source.htm">socketserver.h</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ad7fde891ef174c336b46299c8ace88f4"></a><!-- doxytag: member="SocketServer::SocketServer" ref="ad7fde891ef174c336b46299c8ace88f4" args="(Server *server, const sint_t &amp;descriptor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SocketServer::SocketServer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classServer.htm">Server</a> *&nbsp;</td>
          <td class="paramname"> <em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="limits_8h.htm#a95d88c395560ef694e6258da742ad660">sint_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>descriptor</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="socketserver_8cpp_source.htm#l00265">265</a> of file <a class="el" href="socketserver_8cpp_source.htm">socketserver.cpp</a>.</p>

<p>References <a class="el" href="server_8h_source.htm#l00045">Server::gSocketOpen()</a>, <a class="el" href="socketserver_8h_source.htm#l00044">m_server</a>, <a class="el" href="list_8cpp_source.htm#l00025">socket_server_list</a>, <a class="el" href="socketserver_8cpp_source.htm#l00244">sServer()</a>, <a class="el" href="server_8cpp_source.htm#l00249">Server::sSocketOpen()</a>, and <a class="el" href="macros_8h_source.htm#l00070">UFLAGS_DE</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                                     : <a class="code" href="classSocket.htm#aab53cde845a88cec27192ad7ec8c8869">Socket</a>( server, descriptor )
{
    <a class="code" href="macros_8h.htm#a56f9e62010649bf59e47724b826e3502">UFLAGS_DE</a>( flags );

    <a class="code" href="classSocketServer.htm#a89cde9791b2f0ce928329c55a9ad21e7">sServer</a>( server );

    <a class="code" href="classSocketServer.htm#abe9a0d62586891e9d8449c0f4d1ca97b">m_server</a>-&gt;<a class="code" href="classServer.htm#a2b261b9b308edee58ec6191966bd019a">sSocketOpen</a>( <a class="code" href="classSocketServer.htm#abe9a0d62586891e9d8449c0f4d1ca97b">m_server</a>-&gt;<a class="code" href="classServer.htm#a0c8164b5ed4b2c6efd0ecbd2a8c8a503">gSocketOpen</a>() + 1 );
    <a class="code" href="list_8cpp.htm#a2545f37b44cab86c6aa83abf4489b18b">socket_server_list</a>.push_back( <span class="keyword">this</span> );

    <span class="keywordflow">return</span>;
}
</pre></div></p>

<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classSocketServer_ad7fde891ef174c336b46299c8ace88f4_cgraph.png" border="0" usemap="#classSocketServer_ad7fde891ef174c336b46299c8ace88f4_cgraph" alt=""/></div>
<map name="classSocketServer_ad7fde891ef174c336b46299c8ace88f4_cgraph" id="classSocketServer_ad7fde891ef174c336b46299c8ace88f4_cgraph">
<area shape="rect" id="node3" href="classServer.htm#a0c8164b5ed4b2c6efd0ecbd2a8c8a503" title="Server::gSocketOpen" alt="" coords="260,5,417,35"/><area shape="rect" id="node5" href="classSocketServer.htm#a89cde9791b2f0ce928329c55a9ad21e7" title="SocketServer::sServer" alt="" coords="256,59,421,88"/><area shape="rect" id="node9" href="classServer.htm#a2b261b9b308edee58ec6191966bd019a" title="Server::sSocketOpen" alt="" coords="260,112,417,141"/><area shape="rect" id="node7" href="classServer.htm#ae3d4d866381050c00f383248872877ea" title="Server::Running" alt="" coords="469,59,592,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af0e595690e453ef4b8e8da174069aba9"></a><!-- doxytag: member="SocketServer::~SocketServer" ref="af0e595690e453ef4b8e8da174069aba9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SocketServer::~SocketServer </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="socketserver_8cpp_source.htm#l00277">277</a> of file <a class="el" href="socketserver_8cpp_source.htm">socketserver.cpp</a>.</p>

<p>References <a class="el" href="thread_8cpp_source.htm#l00034">Thread::MutexUnlock()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="classThread.htm#ad616deeb95beb7384b3283c00a0c9bdf">MutexUnlock</a>();
    ::pthread_exit( <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>( EXIT_SUCCESS ) );

    <span class="keywordflow">return</span>;
}
</pre></div></p>

<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classSocketServer_af0e595690e453ef4b8e8da174069aba9_cgraph.png" border="0" usemap="#classSocketServer_af0e595690e453ef4b8e8da174069aba9_cgraph" alt=""/></div>
<map name="classSocketServer_af0e595690e453ef4b8e8da174069aba9_cgraph" id="classSocketServer_af0e595690e453ef4b8e8da174069aba9_cgraph">
<area shape="rect" id="node3" href="classThread.htm#ad616deeb95beb7384b3283c00a0c9bdf" title="Thread::MutexUnlock" alt="" coords="268,5,423,35"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="afdbc60c3bc840875d2214b59c6213f63"></a><!-- doxytag: member="SocketServer::Accept" ref="afdbc60c3bc840875d2214b59c6213f63" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const void SocketServer::Accept </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="socketserver_8cpp_source.htm#l00026">26</a> of file <a class="el" href="socketserver_8cpp_source.htm">socketserver.cpp</a>.</p>

<p>References <a class="el" href="socketclient_8cpp_source.htm#l00024">SocketClient::Delete()</a>, <a class="el" href="socket_8h_source.htm#l00036">Socket::gDescriptor()</a>, <a class="el" href="socketserver_8h_source.htm#l00038">gServer()</a>, <a class="el" href="macros_8h_source.htm#l00079">LOGERRNO</a>, <a class="el" href="macros_8h_source.htm#l00073">LOGSTR</a>, <a class="el" href="socketclient_8cpp_source.htm#l00323">SocketClient::Thread()</a>, <a class="el" href="macros_8h_source.htm#l00070">UFLAGS_DE</a>, and <a class="el" href="socket_8h_source.htm#l00031">Socket::Valid()</a>.</p>

<p>Referenced by <a class="el" href="socketserver_8cpp_source.htm#l00215">Update()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="macros_8h.htm#a56f9e62010649bf59e47724b826e3502">UFLAGS_DE</a>( flags );
    <a class="code" href="limits_8h.htm#a95d88c395560ef694e6258da742ad660">sint_t</a> descriptor = 0;
    sockaddr_storage sin;
    socklen_t size = <span class="keyword">static_cast&lt;</span>socklen_t<span class="keyword">&gt;</span>( <span class="keyword">sizeof</span>( sin ) );
    <a class="code" href="classSocketClient.htm">SocketClient</a>* socket_client;

    <span class="keywordflow">if</span> ( !<a class="code" href="classSocket.htm#a508457b48e6296d1e86c7cc72af65948">Valid</a>() )
    {
        <a class="code" href="macros_8h.htm#acd5f0d05a4501b560a2fbc0799039598">LOGSTR</a>( flags, <span class="stringliteral">&quot;SocketServer::Accept()-&gt; called with invalid socket&quot;</span> );
        <span class="keywordflow">return</span>;
    }

    <span class="keywordflow">if</span> ( ::getsockname( <a class="code" href="classSocket.htm#a45d3aa99d71b868921543a4708471f82">gDescriptor</a>(), reinterpret_cast&lt;sockaddr*&gt;( &amp;sin ), &amp;size ) &lt; 0 )
    {
        <a class="code" href="macros_8h.htm#a39c64b6565bddaca7e2af8518ee764e3">LOGERRNO</a>( flags, <span class="stringliteral">&quot;SocketServer::Accept()-&gt;getsockname()-&gt;&quot;</span> );
        <span class="keywordflow">return</span>;
    }

    <span class="keywordflow">if</span> ( ( descriptor = ::accept( <a class="code" href="classSocket.htm#a45d3aa99d71b868921543a4708471f82">gDescriptor</a>(), reinterpret_cast&lt;sockaddr*&gt;( &amp;sin ), &amp;size ) ) &lt; 0 )
    {
        <a class="code" href="macros_8h.htm#a39c64b6565bddaca7e2af8518ee764e3">LOGERRNO</a>( flags, <span class="stringliteral">&quot;SocketServer::Accept()-&gt;accept()-&gt;&quot;</span> );
        <span class="keywordflow">return</span>;
    }

    socket_client = <span class="keyword">new</span> <a class="code" href="classSocketClient.htm">SocketClient</a>( <a class="code" href="classSocketServer.htm#a659e5775db60e3f8d29b70f2fdd317e7">gServer</a>(), descriptor );

    <span class="keywordflow">if</span> ( !socket_client-&gt;<a class="code" href="classSocketClient.htm#aa304eafc5814ed2ebda33c44ccb60316">Thread</a>() )
    {
        <a class="code" href="macros_8h.htm#acd5f0d05a4501b560a2fbc0799039598">LOGSTR</a>( flags, <span class="stringliteral">&quot;SocketServer::Accept()-&gt;SocketClient::Thread()-&gt; returned false&quot;</span> );
        socket_client-&gt;<a class="code" href="classSocketClient.htm#af09328648d18ae943c8866cf744e5aad">Delete</a>();
        <span class="keywordflow">return</span>;
    }

    <span class="keywordflow">return</span>;
}
</pre></div></p>

<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classSocketServer_afdbc60c3bc840875d2214b59c6213f63_cgraph.png" border="0" usemap="#classSocketServer_afdbc60c3bc840875d2214b59c6213f63_cgraph" alt=""/></div>
<map name="classSocketServer_afdbc60c3bc840875d2214b59c6213f63_cgraph" id="classSocketServer_afdbc60c3bc840875d2214b59c6213f63_cgraph">
<area shape="rect" id="node3" href="classSocketClient.htm#af09328648d18ae943c8866cf744e5aad" title="SocketClient::Delete" alt="" coords="908,32,1060,61"/><area shape="rect" id="node11" href="classSocket.htm#a508457b48e6296d1e86c7cc72af65948" title="Socket::Valid" alt="" coords="1169,608,1273,637"/><area shape="rect" id="node13" href="classSocket.htm#a45d3aa99d71b868921543a4708471f82" title="Socket::gDescriptor" alt="" coords="1148,864,1295,893"/><area shape="rect" id="node15" href="classSocketServer.htm#a659e5775db60e3f8d29b70f2fdd317e7" title="SocketServer::gServer" alt="" coords="215,920,380,949"/><area shape="rect" id="node17" href="classSocketClient.htm#aa304eafc5814ed2ebda33c44ccb60316" title="SocketClient::Thread" alt="" coords="220,581,375,611"/><area shape="rect" id="node5" href="classServer.htm#a01c4cacfdade91bc99d6c8911ca33a54" title="Server::gSocketClose" alt="" coords="1143,5,1300,35"/><area shape="rect" id="node7" href="classThread.htm#a975e77d37e7955c21155bfe4b9ddc7d1" title="Thread::MutexLock" alt="" coords="1151,133,1292,163"/><area shape="rect" id="node9" href="classServer.htm#a1e68e32745cdfe194e0af388d9d5244a" title="Server::sSocketClose" alt="" coords="1143,59,1300,88"/><area shape="rect" id="node19" href="classSocketClient.htm#a6b296c5002caa1229e7d7b9be6f08607" title="SocketClient::New" alt="" coords="663,273,799,303"/><area shape="rect" id="node45" href="classSocketClient.htm#a920016d3ec4026b7cdfc1000cc8168cc" title="SocketClient::Update" alt="" coords="429,659,587,688"/><area shape="rect" id="node23" href="classSocket.htm#adc72a37934a4f2d10f6ae8fc94bb4ca7" title="Socket::gHostname" alt="" coords="1147,341,1296,371"/><area shape="rect" id="node25" href="classSocket.htm#accd94dbf518b30cdd878a9710d3c481c" title="Socket::gPort" alt="" coords="931,139,1037,168"/><area shape="rect" id="node28" href="classSocketClient.htm#a6268f3d184970ec0076da657c39d2e80" title="SocketClient::Send" alt="" coords="913,293,1055,323"/><area shape="rect" id="node39" href="classSocket.htm#a14e5e2493abcae97043297dd170e7a39" title="Socket::sHostname" alt="" coords="911,347,1057,376"/><area shape="rect" id="node41" href="classSocket.htm#a24c8132ced233add89f4fda68284e578" title="Socket::sPort" alt="" coords="931,400,1037,429"/><area shape="rect" id="node43" href="classSocketClient.htm#ab5e6737c8acd4aaa21268e10c1a050b4" title="SocketClient::sState" alt="" coords="908,85,1060,115"/><area shape="rect" id="node30" href="classSocket.htm#a3bb9f40d6e5f32cfa960a86323322c0c" title="Socket::gBytesSent" alt="" coords="1148,235,1295,264"/><area shape="rect" id="node34" href="classServer.htm#a2f8f36b615b6d10eb96dd35620ffd524" title="Server::gSocket" alt="" coords="1160,395,1283,424"/><area shape="rect" id="node36" href="classSocket.htm#a4966e11df7fca3a810cad1cc7091af5e" title="Socket::sBytesSent" alt="" coords="1148,288,1295,317"/><area shape="rect" id="node49" href="classSocketClient.htm#a9c982fdda7a3daa5b153eada40a3b6fb" title="SocketClient::gIdle" alt="" coords="661,659,800,688"/><area shape="rect" id="node51" href="classSocketClient.htm#a074944c7006f994646ed22cb2c955dc9" title="SocketClient::gServer" alt="" coords="651,712,811,741"/><area shape="rect" id="node53" href="classSocketClient.htm#a92fea2bf7e0f20578404ce1abb835a0b" title="SocketClient::ProcessInput" alt="" coords="635,920,827,949"/><area shape="rect" id="node63" href="classSocketClient.htm#a9ee09f452d900e288b2aa187561ef05d" title="SocketClient::Recv" alt="" coords="915,453,1053,483"/><area shape="rect" id="node72" href="classSocketClient.htm#a686aea73a8e9c9dbaac6438ec1b24293" title="SocketClient::sIdle" alt="" coords="1152,555,1291,584"/><area shape="rect" id="node75" href="classServer.htm#ae3d4d866381050c00f383248872877ea" title="Server::Running" alt="" coords="669,816,792,845"/><area shape="rect" id="node77" href="classSocketClient.htm#a472a64c9b811361791c107498eebf57a" title="SocketClient::Send" alt="" coords="913,811,1055,840"/><area shape="rect" id="node56" href="classSocketClient.htm#aa3c0d7886b8fede981c73031cfaf17c6" title="SocketClient::QueueCommand" alt="" coords="875,917,1093,947"/><area shape="rect" id="node60" href="namespaceUtils.htm#a8c70e85acdb1549aa4cd3a16b8d8d9cf" title="Utils::StrNewlines" alt="" coords="917,864,1051,893"/><area shape="rect" id="node65" href="classSocket.htm#ad7ac03a288e6ef47a45e6837f7fef002" title="Socket::gBytesRecvd" alt="" coords="1144,501,1299,531"/><area shape="rect" id="node70" href="classSocket.htm#a150a2ba8da11a6934d6943613ba011ec" title="Socket::sBytesRecvd" alt="" coords="1144,448,1299,477"/></map>
</div>
</p>

<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classSocketServer_afdbc60c3bc840875d2214b59c6213f63_icgraph.png" border="0" usemap="#classSocketServer_afdbc60c3bc840875d2214b59c6213f63_icgraph" alt=""/></div>
<map name="classSocketServer_afdbc60c3bc840875d2214b59c6213f63_icgraph" id="classSocketServer_afdbc60c3bc840875d2214b59c6213f63_icgraph">
<area shape="rect" id="node3" href="classSocketServer.htm#abf0a57a793cb3cf9ad308c238329b690" title="SocketServer::Update" alt="" coords="213,5,376,35"/><area shape="rect" id="node5" href="classSocketServer.htm#a613401f64ca4c185e0a90dd2ae57b546" title="SocketServer::Thread" alt="" coords="424,5,584,35"/><area shape="rect" id="node7" href="classServer.htm#a84ed4b0103f83fe0ece0a89983d0787a" title="Server::Startup" alt="" coords="632,5,752,35"/><area shape="rect" id="node9" href="main_8cpp.htm#ad53223b8779f25caeddb70a3b9172967" title="main" alt="" coords="801,5,855,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aee14cfe29fef99baa29664eef8d89dc8"></a><!-- doxytag: member="SocketServer::Bind" ref="aee14cfe29fef99baa29664eef8d89dc8" args="(const uint_t &amp;port, const string &amp;addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const bool SocketServer::Bind </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="limits_8h.htm#a12a1e9b3ce141648783a82445d02b58d">uint_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&nbsp;</td>
          <td class="paramname"> <em>addr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="socketserver_8cpp_source.htm#l00064">64</a> of file <a class="el" href="socketserver_8cpp_source.htm">socketserver.cpp</a>.</p>

<p>References <a class="el" href="macros_8h_source.htm#l00056">CSTR</a>, <a class="el" href="socket_8h_source.htm#l00036">Socket::gDescriptor()</a>, <a class="el" href="macros_8h_source.htm#l00079">LOGERRNO</a>, <a class="el" href="macros_8h_source.htm#l00073">LOGSTR</a>, <a class="el" href="macros_8h_source.htm#l00070">UFLAGS_DE</a>, and <a class="el" href="socket_8h_source.htm#l00031">Socket::Valid()</a>.</p>

<p>Referenced by <a class="el" href="socketserver_8cpp_source.htm#l00139">New()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="macros_8h.htm#a56f9e62010649bf59e47724b826e3502">UFLAGS_DE</a>( flags );
    <a class="code" href="limits_8h.htm#a95d88c395560ef694e6258da742ad660">sint_t</a> enable = 1;
    <span class="keyword">static</span> sockaddr_in6 sa_zero;
    sockaddr_in6 sa = sa_zero;

    <span class="keywordflow">if</span> ( !<a class="code" href="classSocket.htm#a508457b48e6296d1e86c7cc72af65948">Valid</a>() )
    {
        <a class="code" href="macros_8h.htm#acd5f0d05a4501b560a2fbc0799039598">LOGSTR</a>( flags, <span class="stringliteral">&quot;SocketServer::Bind()-&gt; called with invalid socket&quot;</span> );
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">if</span> ( addr.empty() )
    {
        <a class="code" href="macros_8h.htm#acd5f0d05a4501b560a2fbc0799039598">LOGSTR</a>( flags, <span class="stringliteral">&quot;SocketServer::Bind()-&gt; called with empty addr&quot;</span> );
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    sa.sin6_family = AF_INET6;
    sa.sin6_port = htons( port );
    inet_pton( AF_INET6, <a class="code" href="macros_8h.htm#a9e05c5960bb1d108f6621513f708bad4">CSTR</a>( addr ), &amp;sa.sin6_addr );

    <span class="keywordflow">if</span> ( ::setsockopt( <a class="code" href="classSocket.htm#a45d3aa99d71b868921543a4708471f82">gDescriptor</a>(), SOL_SOCKET, SO_REUSEADDR, reinterpret_cast&lt;const char*&gt;( &amp;enable ), <span class="keyword">sizeof</span>( enable ) ) &lt; 0 )
    {
        <a class="code" href="macros_8h.htm#a39c64b6565bddaca7e2af8518ee764e3">LOGERRNO</a>( flags, <span class="stringliteral">&quot;SocketServer::Bind()-&gt;setsockopt()-&gt;&quot;</span> );
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">if</span> ( ::bind( <a class="code" href="classSocket.htm#a45d3aa99d71b868921543a4708471f82">gDescriptor</a>(), reinterpret_cast&lt;sockaddr*&gt;( &amp;sa ), <span class="keyword">sizeof</span>( sa ) ) &lt; 0 )
    {
        <a class="code" href="macros_8h.htm#a39c64b6565bddaca7e2af8518ee764e3">LOGERRNO</a>( flags, <span class="stringliteral">&quot;SocketServer::Bind()-&gt;bind()-&gt;&quot;</span> );
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div></p>

<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classSocketServer_aee14cfe29fef99baa29664eef8d89dc8_cgraph.png" border="0" usemap="#classSocketServer_aee14cfe29fef99baa29664eef8d89dc8_cgraph" alt=""/></div>
<map name="classSocketServer_aee14cfe29fef99baa29664eef8d89dc8_cgraph" id="classSocketServer_aee14cfe29fef99baa29664eef8d89dc8_cgraph">
<area shape="rect" id="node3" href="classSocket.htm#a45d3aa99d71b868921543a4708471f82" title="Socket::gDescriptor" alt="" coords="199,5,345,35"/><area shape="rect" id="node5" href="classSocket.htm#a508457b48e6296d1e86c7cc72af65948" title="Socket::Valid" alt="" coords="220,59,324,88"/></map>
</div>
</p>

<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classSocketServer_aee14cfe29fef99baa29664eef8d89dc8_icgraph.png" border="0" usemap="#classSocketServer_aee14cfe29fef99baa29664eef8d89dc8_icgraph" alt=""/></div>
<map name="classSocketServer_aee14cfe29fef99baa29664eef8d89dc8_icgraph" id="classSocketServer_aee14cfe29fef99baa29664eef8d89dc8_icgraph">
<area shape="rect" id="node3" href="classSocketServer.htm#a276e17da8bbf562313bce8edfd32e231" title="SocketServer::New" alt="" coords="199,5,340,35"/><area shape="rect" id="node5" href="classSocketServer.htm#a613401f64ca4c185e0a90dd2ae57b546" title="SocketServer::Thread" alt="" coords="389,5,549,35"/><area shape="rect" id="node7" href="classServer.htm#a84ed4b0103f83fe0ece0a89983d0787a" title="Server::Startup" alt="" coords="597,5,717,35"/><area shape="rect" id="node9" href="main_8cpp.htm#ad53223b8779f25caeddb70a3b9172967" title="main" alt="" coords="767,5,820,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4fb2589ed01cea5daae154b2f06b4f41"></a><!-- doxytag: member="SocketServer::Delete" ref="a4fb2589ed01cea5daae154b2f06b4f41" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const void SocketServer::Delete </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements <a class="el" href="classSocket.htm#ac7a9c8cef7e70fa1cfa5d4512db2adea">Socket</a>.</p>

<p>Definition at line <a class="el" href="socketserver_8cpp_source.htm#l00102">102</a> of file <a class="el" href="socketserver_8cpp_source.htm">socketserver.cpp</a>.</p>

<p>References <a class="el" href="server_8h_source.htm#l00044">Server::gSocketClose()</a>, <a class="el" href="macros_8h_source.htm#l00076">LOGFMT</a>, <a class="el" href="socketserver_8h_source.htm#l00044">m_server</a>, <a class="el" href="thread_8cpp_source.htm#l00024">Thread::MutexLock()</a>, <a class="el" href="list_8cpp_source.htm#l00025">socket_server_list</a>, <a class="el" href="server_8cpp_source.htm#l00234">Server::sSocketClose()</a>, <a class="el" href="macros_8h_source.htm#l00070">UFLAGS_DE</a>, and <a class="el" href="socket_8h_source.htm#l00031">Socket::Valid()</a>.</p>

<p>Referenced by <a class="el" href="socketserver_8cpp_source.htm#l00215">Update()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="macros_8h.htm#a56f9e62010649bf59e47724b826e3502">UFLAGS_DE</a>( flags );

    <span class="keywordflow">if</span> ( !<a class="code" href="classSocket.htm#a508457b48e6296d1e86c7cc72af65948">Valid</a>() )
        <span class="keywordflow">return</span>;

    <a class="code" href="classThread.htm#a975e77d37e7955c21155bfe4b9ddc7d1">MutexLock</a>();

    <span class="keywordflow">if</span> ( !<a class="code" href="classSocketServer.htm#abe9a0d62586891e9d8449c0f4d1ca97b">m_server</a>-&gt;<a class="code" href="classServer.htm#a1e68e32745cdfe194e0af388d9d5244a">sSocketClose</a>( <a class="code" href="classSocketServer.htm#abe9a0d62586891e9d8449c0f4d1ca97b">m_server</a>-&gt;<a class="code" href="classServer.htm#a01c4cacfdade91bc99d6c8911ca33a54">gSocketClose</a>() + 1 ) )
        <a class="code" href="macros_8h.htm#ac116c157aff5572959fd33c0ecd913da">LOGFMT</a>( flags, <span class="stringliteral">&quot;SocketServer::Delete()-&gt;Server::sSocketClose()-&gt; value %lu returned false&quot;</span>, <a class="code" href="classSocketServer.htm#abe9a0d62586891e9d8449c0f4d1ca97b">m_server</a>-&gt;<a class="code" href="classServer.htm#a01c4cacfdade91bc99d6c8911ca33a54">gSocketClose</a>() + 1 );

    <a class="code" href="list_8cpp.htm#a2545f37b44cab86c6aa83abf4489b18b">socket_server_list</a>.remove( <span class="keyword">this</span> );
    <span class="keyword">delete</span> <span class="keyword">this</span>;

    <span class="keywordflow">return</span>;
}
</pre></div></p>

<p><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classSocketServer_a4fb2589ed01cea5daae154b2f06b4f41_cgraph.png" border="0" usemap="#classSocketServer_a4fb2589ed01cea5daae154b2f06b4f41_cgraph" alt=""/></div>
<map name="classSocketServer_a4fb2589ed01cea5daae154b2f06b4f41_cgraph" id="classSocketServer_a4fb2589ed01cea5daae154b2f06b4f41_cgraph">
<area shape="rect" id="node3" href="classServer.htm#a01c4cacfdade91bc99d6c8911ca33a54" title="Server::gSocketClose" alt="" coords="215,5,372,35"/><area shape="rect" id="node5" href="classThread.htm#a975e77d37e7955c21155bfe4b9ddc7d1" title="Thread::MutexLock" alt="" coords="223,59,364,88"/><area shape="rect" id="node7" href="classServer.htm#a1e68e32745cdfe194e0af388d9d5244a" title="Server::sSocketClose" alt="" coords="215,112,372,141"/><area shape="rect" id="node9" href="classSocket.htm#a508457b48e6296d1e86c7cc72af65948" title="Socket::Valid" alt="" coords="241,165,345,195"/></map>
</div>
</p>

<p><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classSocketServer_a4fb2589ed01cea5daae154b2f06b4f41_icgraph.png" border="0" usemap="#classSocketServer_a4fb2589ed01cea5daae154b2f06b4f41_icgraph" alt=""/></div>
<map name="classSocketServer_a4fb2589ed01cea5daae154b2f06b4f41_icgraph" id="classSocketServer_a4fb2589ed01cea5daae154b2f06b4f41_icgraph">
<area shape="rect" id="node3" href="classSocketServer.htm#abf0a57a793cb3cf9ad308c238329b690" title="SocketServer::Update" alt="" coords="213,5,376,35"/><area shape="rect" id="node5" href="classSocketServer.htm#a613401f64ca4c185e0a90dd2ae57b546" title="SocketServer::Thread" alt="" coords="424,5,584,35"/><area shape="rect" id="node7" href="classServer.htm#a84ed4b0103f83fe0ece0a89983d0787a" title="Server::Startup" alt="" coords="632,5,752,35"/><area shape="rect" id="node9" href="main_8cpp.htm#ad53223b8779f25caeddb70a3b9172967" title="main" alt="" coords="801,5,855,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a659e5775db60e3f8d29b70f2fdd317e7"></a><!-- doxytag: member="SocketServer::gServer" ref="a659e5775db60e3f8d29b70f2fdd317e7" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classServer.htm">Server</a>* SocketServer::gServer </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="socketserver_8h_source.htm#l00038">38</a> of file <a class="el" href="socketserver_8h_source.htm">socketserver.h</a>.</p>

<p>References <a class="el" href="socketserver_8h_source.htm#l00044">m_server</a>.</p>

<p>Referenced by <a class="el" href="socketserver_8cpp_source.htm#l00026">Accept()</a>, and <a class="el" href="socketserver_8cpp_source.htm#l00215">Update()</a>.</p>

<p><div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="classSocketServer.htm#abe9a0d62586891e9d8449c0f4d1ca97b">m_server</a>; }
</pre></div></p>

<p><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classSocketServer_a659e5775db60e3f8d29b70f2fdd317e7_icgraph.png" border="0" usemap="#classSocketServer_a659e5775db60e3f8d29b70f2fdd317e7_icgraph" alt=""/></div>
<map name="classSocketServer_a659e5775db60e3f8d29b70f2fdd317e7_icgraph" id="classSocketServer_a659e5775db60e3f8d29b70f2fdd317e7_icgraph">
<area shape="rect" id="node3" href="classSocketServer.htm#afdbc60c3bc840875d2214b59c6213f63" title="SocketServer::Accept" alt="" coords="221,5,381,35"/><area shape="rect" id="node5" href="classSocketServer.htm#abf0a57a793cb3cf9ad308c238329b690" title="SocketServer::Update" alt="" coords="429,32,592,61"/><area shape="rect" id="node7" href="classSocketServer.htm#a613401f64ca4c185e0a90dd2ae57b546" title="SocketServer::Thread" alt="" coords="640,32,800,61"/><area shape="rect" id="node9" href="classServer.htm#a84ed4b0103f83fe0ece0a89983d0787a" title="Server::Startup" alt="" coords="848,32,968,61"/><area shape="rect" id="node11" href="main_8cpp.htm#ad53223b8779f25caeddb70a3b9172967" title="main" alt="" coords="1017,32,1071,61"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5c5b0cbbee6a2e265d0510b40bcc12d8"></a><!-- doxytag: member="SocketServer::Listen" ref="a5c5b0cbbee6a2e265d0510b40bcc12d8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const bool SocketServer::Listen </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="socketserver_8cpp_source.htm#l00120">120</a> of file <a class="el" href="socketserver_8cpp_source.htm">socketserver.cpp</a>.</p>

<p>References <a class="el" href="config_8h_source.htm#l00070">CFG_SOC_MAX_PENDING</a>, <a class="el" href="socket_8h_source.htm#l00036">Socket::gDescriptor()</a>, <a class="el" href="macros_8h_source.htm#l00079">LOGERRNO</a>, <a class="el" href="macros_8h_source.htm#l00073">LOGSTR</a>, <a class="el" href="macros_8h_source.htm#l00070">UFLAGS_DE</a>, and <a class="el" href="socket_8h_source.htm#l00031">Socket::Valid()</a>.</p>

<p>Referenced by <a class="el" href="socketserver_8cpp_source.htm#l00139">New()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="macros_8h.htm#a56f9e62010649bf59e47724b826e3502">UFLAGS_DE</a>( flags );

    <span class="keywordflow">if</span> ( !<a class="code" href="classSocket.htm#a508457b48e6296d1e86c7cc72af65948">Valid</a>() )
    {
        <a class="code" href="macros_8h.htm#acd5f0d05a4501b560a2fbc0799039598">LOGSTR</a>( flags, <span class="stringliteral">&quot;SocketServer::Listen()-&gt; called with invalid socket&quot;</span> );
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">if</span> ( ::listen( <a class="code" href="classSocket.htm#a45d3aa99d71b868921543a4708471f82">gDescriptor</a>(), <a class="code" href="config_8h.htm#aa0e8c6d702ecb6118b49483584524db1">CFG_SOC_MAX_PENDING</a> ) &lt; 0 )
    {
        <a class="code" href="macros_8h.htm#a39c64b6565bddaca7e2af8518ee764e3">LOGERRNO</a>( flags, <span class="stringliteral">&quot;SocketServer::Listen()-&gt;listen()-&gt;&quot;</span> );
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div></p>

<p><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classSocketServer_a5c5b0cbbee6a2e265d0510b40bcc12d8_cgraph.png" border="0" usemap="#classSocketServer_a5c5b0cbbee6a2e265d0510b40bcc12d8_cgraph" alt=""/></div>
<map name="classSocketServer_a5c5b0cbbee6a2e265d0510b40bcc12d8_cgraph" id="classSocketServer_a5c5b0cbbee6a2e265d0510b40bcc12d8_cgraph">
<area shape="rect" id="node3" href="classSocket.htm#a45d3aa99d71b868921543a4708471f82" title="Socket::gDescriptor" alt="" coords="209,5,356,35"/><area shape="rect" id="node5" href="classSocket.htm#a508457b48e6296d1e86c7cc72af65948" title="Socket::Valid" alt="" coords="231,59,335,88"/></map>
</div>
</p>

<p><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classSocketServer_a5c5b0cbbee6a2e265d0510b40bcc12d8_icgraph.png" border="0" usemap="#classSocketServer_a5c5b0cbbee6a2e265d0510b40bcc12d8_icgraph" alt=""/></div>
<map name="classSocketServer_a5c5b0cbbee6a2e265d0510b40bcc12d8_icgraph" id="classSocketServer_a5c5b0cbbee6a2e265d0510b40bcc12d8_icgraph">
<area shape="rect" id="node3" href="classSocketServer.htm#a276e17da8bbf562313bce8edfd32e231" title="SocketServer::New" alt="" coords="209,5,351,35"/><area shape="rect" id="node5" href="classSocketServer.htm#a613401f64ca4c185e0a90dd2ae57b546" title="SocketServer::Thread" alt="" coords="400,5,560,35"/><area shape="rect" id="node7" href="classServer.htm#a84ed4b0103f83fe0ece0a89983d0787a" title="Server::Startup" alt="" coords="608,5,728,35"/><area shape="rect" id="node9" href="main_8cpp.htm#ad53223b8779f25caeddb70a3b9172967" title="main" alt="" coords="777,5,831,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a276e17da8bbf562313bce8edfd32e231"></a><!-- doxytag: member="SocketServer::New" ref="a276e17da8bbf562313bce8edfd32e231" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const bool SocketServer::New </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements <a class="el" href="classSocket.htm#a6c74362c2411c96aff10a875772021f2">Socket</a>.</p>

<p>Definition at line <a class="el" href="socketserver_8cpp_source.htm#l00139">139</a> of file <a class="el" href="socketserver_8cpp_source.htm">socketserver.cpp</a>.</p>

<p>References <a class="el" href="socketserver_8cpp_source.htm#l00064">Bind()</a>, <a class="el" href="macros_8h_source.htm#l00056">CSTR</a>, <a class="el" href="server_8cpp_source.htm#l00194">Server::gHostname()</a>, <a class="el" href="server_8h_source.htm#l00042">Server::gPort()</a>, <a class="el" href="socketserver_8cpp_source.htm#l00120">Listen()</a>, <a class="el" href="macros_8h_source.htm#l00076">LOGFMT</a>, <a class="el" href="macros_8h_source.htm#l00073">LOGSTR</a>, <a class="el" href="socketserver_8h_source.htm#l00044">m_server</a>, <a class="el" href="thread_8cpp_source.htm#l00024">Thread::MutexLock()</a>, <a class="el" href="thread_8cpp_source.htm#l00034">Thread::MutexUnlock()</a>, <a class="el" href="socket_8cpp_source.htm#l00073">Socket::sHostname()</a>, <a class="el" href="server_8cpp_source.htm#l00094">Server::Shutdown()</a>, and <a class="el" href="macros_8h_source.htm#l00070">UFLAGS_DE</a>.</p>

<p>Referenced by <a class="el" href="socketserver_8cpp_source.htm#l00168">Thread()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="macros_8h.htm#a56f9e62010649bf59e47724b826e3502">UFLAGS_DE</a>( flags );

    <a class="code" href="classThread.htm#a975e77d37e7955c21155bfe4b9ddc7d1">MutexLock</a>();

    <span class="keywordflow">if</span> ( !<a class="code" href="classSocketServer.htm#aee14cfe29fef99baa29664eef8d89dc8">Bind</a>( <a class="code" href="classSocketServer.htm#abe9a0d62586891e9d8449c0f4d1ca97b">m_server</a>-&gt;<a class="code" href="classServer.htm#a307ecabcbab896360450e2b06b22a411">gPort</a>(), CFG_SOC_BIND_ADDR ) )
    {
        <a class="code" href="macros_8h.htm#acd5f0d05a4501b560a2fbc0799039598">LOGSTR</a>( flags, <span class="stringliteral">&quot;SocketServer::New()-&gt;SocketServer::Bind()-&gt; returned false&quot;</span> );
        <a class="code" href="classSocketServer.htm#abe9a0d62586891e9d8449c0f4d1ca97b">m_server</a>-&gt;<a class="code" href="classServer.htm#a9b7082bbc9faca6eb84180f856116762">Shutdown</a>( EXIT_FAILURE );
    }

    <span class="keywordflow">if</span> ( !<a class="code" href="classSocket.htm#a14e5e2493abcae97043297dd170e7a39">sHostname</a>( <a class="code" href="classSocketServer.htm#abe9a0d62586891e9d8449c0f4d1ca97b">m_server</a>-&gt;<a class="code" href="classServer.htm#a49dcdc5d378b3c12c46b80788c986052">gHostname</a>() ) )
    {
        <a class="code" href="macros_8h.htm#ac116c157aff5572959fd33c0ecd913da">LOGFMT</a>( flags, <span class="stringliteral">&quot;SocketServer::New()-&gt;SocketServer::sHostname()-&gt; hostname %s returned false&quot;</span>, <a class="code" href="macros_8h.htm#a9e05c5960bb1d108f6621513f708bad4">CSTR</a>( <a class="code" href="classSocketServer.htm#abe9a0d62586891e9d8449c0f4d1ca97b">m_server</a>-&gt;<a class="code" href="classServer.htm#a49dcdc5d378b3c12c46b80788c986052">gHostname</a>() ) );
        <a class="code" href="classSocketServer.htm#abe9a0d62586891e9d8449c0f4d1ca97b">m_server</a>-&gt;<a class="code" href="classServer.htm#a9b7082bbc9faca6eb84180f856116762">Shutdown</a>( EXIT_FAILURE );
    }

    <span class="keywordflow">if</span> ( !<a class="code" href="classSocketServer.htm#a5c5b0cbbee6a2e265d0510b40bcc12d8">Listen</a>() )
    {
        <a class="code" href="macros_8h.htm#acd5f0d05a4501b560a2fbc0799039598">LOGSTR</a>( flags, <span class="stringliteral">&quot;SocketServer::New()-&gt;SocketServer::Listen()-&gt; returned false&quot;</span> );
        <a class="code" href="classSocketServer.htm#abe9a0d62586891e9d8449c0f4d1ca97b">m_server</a>-&gt;<a class="code" href="classServer.htm#a9b7082bbc9faca6eb84180f856116762">Shutdown</a>( EXIT_FAILURE );
    }

    <a class="code" href="classThread.htm#ad616deeb95beb7384b3283c00a0c9bdf">MutexUnlock</a>();

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div></p>

<p><div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classSocketServer_a276e17da8bbf562313bce8edfd32e231_cgraph.png" border="0" usemap="#classSocketServer_a276e17da8bbf562313bce8edfd32e231_cgraph" alt=""/></div>
<map name="classSocketServer_a276e17da8bbf562313bce8edfd32e231_cgraph" id="classSocketServer_a276e17da8bbf562313bce8edfd32e231_cgraph">
<area shape="rect" id="node3" href="classSocketServer.htm#aee14cfe29fef99baa29664eef8d89dc8" title="SocketServer::Bind" alt="" coords="204,5,348,35"/><area shape="rect" id="node9" href="classServer.htm#a49dcdc5d378b3c12c46b80788c986052" title="Server::gHostname" alt="" coords="203,112,349,141"/><area shape="rect" id="node11" href="classServer.htm#a307ecabcbab896360450e2b06b22a411" title="Server::gPort" alt="" coords="223,165,329,195"/><area shape="rect" id="node13" href="classSocketServer.htm#a5c5b0cbbee6a2e265d0510b40bcc12d8" title="SocketServer::Listen" alt="" coords="199,59,353,88"/><area shape="rect" id="node17" href="classThread.htm#a975e77d37e7955c21155bfe4b9ddc7d1" title="Thread::MutexLock" alt="" coords="205,219,347,248"/><area shape="rect" id="node19" href="classThread.htm#ad616deeb95beb7384b3283c00a0c9bdf" title="Thread::MutexUnlock" alt="" coords="199,272,353,301"/><area shape="rect" id="node21" href="classSocket.htm#a14e5e2493abcae97043297dd170e7a39" title="Socket::sHostname" alt="" coords="203,325,349,355"/><area shape="rect" id="node23" href="classServer.htm#a9b7082bbc9faca6eb84180f856116762" title="Server::Shutdown" alt="" coords="209,379,343,408"/><area shape="rect" id="node5" href="classSocket.htm#a45d3aa99d71b868921543a4708471f82" title="Socket::gDescriptor" alt="" coords="404,5,551,35"/><area shape="rect" id="node7" href="classSocket.htm#a508457b48e6296d1e86c7cc72af65948" title="Socket::Valid" alt="" coords="425,59,529,88"/></map>
</div>
</p>

<p><div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classSocketServer_a276e17da8bbf562313bce8edfd32e231_icgraph.png" border="0" usemap="#classSocketServer_a276e17da8bbf562313bce8edfd32e231_icgraph" alt=""/></div>
<map name="classSocketServer_a276e17da8bbf562313bce8edfd32e231_icgraph" id="classSocketServer_a276e17da8bbf562313bce8edfd32e231_icgraph">
<area shape="rect" id="node3" href="classSocketServer.htm#a613401f64ca4c185e0a90dd2ae57b546" title="SocketServer::Thread" alt="" coords="197,5,357,35"/><area shape="rect" id="node5" href="classServer.htm#a84ed4b0103f83fe0ece0a89983d0787a" title="Server::Startup" alt="" coords="405,5,525,35"/><area shape="rect" id="node7" href="main_8cpp.htm#ad53223b8779f25caeddb70a3b9172967" title="main" alt="" coords="575,5,628,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a89cde9791b2f0ce928329c55a9ad21e7"></a><!-- doxytag: member="SocketServer::sServer" ref="a89cde9791b2f0ce928329c55a9ad21e7" args="(Server *server)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const bool SocketServer::sServer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classServer.htm">Server</a> *&nbsp;</td>
          <td class="paramname"> <em>server</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="socketserver_8cpp_source.htm#l00244">244</a> of file <a class="el" href="socketserver_8cpp_source.htm">socketserver.cpp</a>.</p>

<p>References <a class="el" href="macros_8h_source.htm#l00073">LOGSTR</a>, <a class="el" href="socketserver_8h_source.htm#l00044">m_server</a>, <a class="el" href="server_8h_source.htm#l00035">Server::Running()</a>, and <a class="el" href="macros_8h_source.htm#l00070">UFLAGS_DE</a>.</p>

<p>Referenced by <a class="el" href="socketserver_8cpp_source.htm#l00265">SocketServer()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="macros_8h.htm#a56f9e62010649bf59e47724b826e3502">UFLAGS_DE</a>( flags );

    <span class="keywordflow">if</span> ( !server )
    {
        <a class="code" href="macros_8h.htm#acd5f0d05a4501b560a2fbc0799039598">LOGSTR</a>( flags, <span class="stringliteral">&quot;SocketServer::sServer()-&gt; called with NULL server&quot;</span> );
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">if</span> ( !server-&gt;<a class="code" href="classServer.htm#ae3d4d866381050c00f383248872877ea">Running</a>() )
    {
        <a class="code" href="macros_8h.htm#acd5f0d05a4501b560a2fbc0799039598">LOGSTR</a>( flags, <span class="stringliteral">&quot;SocketServer::sServer()-&gt; called with offline server&quot;</span> );
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <a class="code" href="classSocketServer.htm#abe9a0d62586891e9d8449c0f4d1ca97b">m_server</a> = server;

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div></p>

<p><div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classSocketServer_a89cde9791b2f0ce928329c55a9ad21e7_cgraph.png" border="0" usemap="#classSocketServer_a89cde9791b2f0ce928329c55a9ad21e7_cgraph" alt=""/></div>
<map name="classSocketServer_a89cde9791b2f0ce928329c55a9ad21e7_cgraph" id="classSocketServer_a89cde9791b2f0ce928329c55a9ad21e7_cgraph">
<area shape="rect" id="node3" href="classServer.htm#ae3d4d866381050c00f383248872877ea" title="Server::Running" alt="" coords="219,5,341,35"/></map>
</div>
</p>

<p><div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classSocketServer_a89cde9791b2f0ce928329c55a9ad21e7_icgraph.png" border="0" usemap="#classSocketServer_a89cde9791b2f0ce928329c55a9ad21e7_icgraph" alt=""/></div>
<map name="classSocketServer_a89cde9791b2f0ce928329c55a9ad21e7_icgraph" id="classSocketServer_a89cde9791b2f0ce928329c55a9ad21e7_icgraph">
<area shape="rect" id="node3" href="classSocketServer.htm#ad7fde891ef174c336b46299c8ace88f4" title="SocketServer::SocketServer" alt="" coords="219,5,421,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a613401f64ca4c185e0a90dd2ae57b546"></a><!-- doxytag: member="SocketServer::Thread" ref="a613401f64ca4c185e0a90dd2ae57b546" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const bool SocketServer::Thread </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classThread.htm#a95c703fb8f2f27cb64f475a8c940864a">Thread</a>.</p>

<p>Definition at line <a class="el" href="socketserver_8cpp_source.htm#l00168">168</a> of file <a class="el" href="socketserver_8cpp_source.htm">socketserver.cpp</a>.</p>

<p>References <a class="el" href="macros_8h_source.htm#l00079">LOGERRNO</a>, <a class="el" href="macros_8h_source.htm#l00073">LOGSTR</a>, <a class="el" href="socketserver_8cpp_source.htm#l00139">New()</a>, <a class="el" href="list_8cpp_source.htm#l00026">thread_list</a>, <a class="el" href="macros_8h_source.htm#l00070">UFLAGS_DE</a>, <a class="el" href="socketserver_8cpp_source.htm#l00215">Update()</a>, and <a class="el" href="socket_8h_source.htm#l00031">Socket::Valid()</a>.</p>

<p>Referenced by <a class="el" href="server_8cpp_source.htm#l00131">Server::Startup()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="macros_8h.htm#a56f9e62010649bf59e47724b826e3502">UFLAGS_DE</a>( flags );
    pthread_t thread_id = 0;
    pthread_attr_t res_attr;

    <span class="keywordflow">if</span> ( !<a class="code" href="classSocket.htm#a508457b48e6296d1e86c7cc72af65948">Valid</a>() )
    {
        <a class="code" href="macros_8h.htm#acd5f0d05a4501b560a2fbc0799039598">LOGSTR</a>( flags, <span class="stringliteral">&quot;SocketServer::Thread()-&gt; called with invalid socket&quot;</span> );
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">if</span> ( !<a class="code" href="classSocketServer.htm#a276e17da8bbf562313bce8edfd32e231">New</a>() )
    {
        <a class="code" href="macros_8h.htm#acd5f0d05a4501b560a2fbc0799039598">LOGSTR</a>( flags, <span class="stringliteral">&quot;SocketServer::Thread()-&gt;SocketServer::New()-&gt; returned false&quot;</span> );
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">if</span> ( ::pthread_attr_init( &amp;res_attr ) != 0 )
    {
        <a class="code" href="macros_8h.htm#a39c64b6565bddaca7e2af8518ee764e3">LOGERRNO</a>( flags, <span class="stringliteral">&quot;SocketServer::Thread()-&gt;pthread_attr_init()-&gt;&quot;</span> );
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">if</span> ( ::pthread_attr_setdetachstate( &amp;res_attr, PTHREAD_CREATE_JOINABLE ) != 0 )
    {
        <a class="code" href="macros_8h.htm#a39c64b6565bddaca7e2af8518ee764e3">LOGERRNO</a>( flags, <span class="stringliteral">&quot;SocketServer::Thread()-&gt;pthread_attr_setdetachstate()-&gt;&quot;</span> );
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">if</span> ( ::pthread_create( &amp;thread_id, &amp;res_attr, &amp;<a class="code" href="classSocketServer.htm#abf0a57a793cb3cf9ad308c238329b690">SocketServer::Update</a>, <span class="keyword">this</span> ) != 0 )
    {
        <a class="code" href="macros_8h.htm#a39c64b6565bddaca7e2af8518ee764e3">LOGERRNO</a>( flags, <span class="stringliteral">&quot;SocketServer::Thread()-&gt;pthread_create()-&gt;&quot;</span> );
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">if</span> ( ::pthread_attr_destroy( &amp;res_attr ) != 0 )
    {
        <a class="code" href="macros_8h.htm#a39c64b6565bddaca7e2af8518ee764e3">LOGERRNO</a>( flags, <span class="stringliteral">&quot;SocketServer::Thread()-&gt;pthread_attr_destroy()-&gt;&quot;</span> );
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <a class="code" href="list_8cpp.htm#ac358631acaeaf160b1da80cac988471b">thread_list</a>.insert( pair&lt;pthread_t,string&gt;( thread_id, <span class="stringliteral">&quot;SocketServer::Thread()&quot;</span> ) );

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div></p>

<p><div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classSocketServer_a613401f64ca4c185e0a90dd2ae57b546_cgraph.png" border="0" usemap="#classSocketServer_a613401f64ca4c185e0a90dd2ae57b546_cgraph" alt=""/></div>
<map name="classSocketServer_a613401f64ca4c185e0a90dd2ae57b546_cgraph" id="classSocketServer_a613401f64ca4c185e0a90dd2ae57b546_cgraph">
<area shape="rect" id="node3" href="classSocketServer.htm#a276e17da8bbf562313bce8edfd32e231" title="SocketServer::New" alt="" coords="1079,217,1220,247"/><area shape="rect" id="node9" href="classSocket.htm#a508457b48e6296d1e86c7cc72af65948" title="Socket::Valid" alt="" coords="1588,657,1692,687"/><area shape="rect" id="node27" href="classSocketServer.htm#abf0a57a793cb3cf9ad308c238329b690" title="SocketServer::Update" alt="" coords="213,428,376,457"/><area shape="rect" id="node5" href="classSocketServer.htm#aee14cfe29fef99baa29664eef8d89dc8" title="SocketServer::Bind" alt="" coords="1331,477,1475,507"/><area shape="rect" id="node11" href="classServer.htm#a49dcdc5d378b3c12c46b80788c986052" title="Server::gHostname" alt="" coords="1329,112,1476,141"/><area shape="rect" id="node13" href="classServer.htm#a307ecabcbab896360450e2b06b22a411" title="Server::gPort" alt="" coords="1349,165,1456,195"/><area shape="rect" id="node15" href="classSocketServer.htm#a5c5b0cbbee6a2e265d0510b40bcc12d8" title="SocketServer::Listen" alt="" coords="1325,683,1480,712"/><area shape="rect" id="node19" href="classThread.htm#a975e77d37e7955c21155bfe4b9ddc7d1" title="Thread::MutexLock" alt="" coords="1569,268,1711,297"/><area shape="rect" id="node21" href="classThread.htm#ad616deeb95beb7384b3283c00a0c9bdf" title="Thread::MutexUnlock" alt="" coords="1325,5,1480,35"/><area shape="rect" id="node23" href="classSocket.htm#a14e5e2493abcae97043297dd170e7a39" title="Socket::sHostname" alt="" coords="1329,736,1476,765"/><area shape="rect" id="node25" href="classServer.htm#a9b7082bbc9faca6eb84180f856116762" title="Server::Shutdown" alt="" coords="1336,59,1469,88"/><area shape="rect" id="node7" href="classSocket.htm#a45d3aa99d71b868921543a4708471f82" title="Socket::gDescriptor" alt="" coords="1567,1209,1713,1239"/><area shape="rect" id="node29" href="classSocketServer.htm#afdbc60c3bc840875d2214b59c6213f63" title="SocketServer::Accept" alt="" coords="424,555,584,584"/><area shape="rect" id="node40" href="classSocketServer.htm#a659e5775db60e3f8d29b70f2fdd317e7" title="SocketServer::gServer" alt="" coords="633,685,799,715"/><area shape="rect" id="node99" href="classServer.htm#ae3d4d866381050c00f383248872877ea" title="Server::Running" alt="" coords="1088,581,1211,611"/><area shape="rect" id="node109" href="classSocketServer.htm#a4fb2589ed01cea5daae154b2f06b4f41" title="SocketServer::Delete" alt="" coords="1324,320,1481,349"/><area shape="rect" id="node31" href="classSocketClient.htm#af09328648d18ae943c8866cf744e5aad" title="SocketClient::Delete" alt="" coords="1327,373,1479,403"/><area shape="rect" id="node42" href="classSocketClient.htm#aa304eafc5814ed2ebda33c44ccb60316" title="SocketClient::Thread" alt="" coords="639,581,793,611"/><area shape="rect" id="node33" href="classServer.htm#a01c4cacfdade91bc99d6c8911ca33a54" title="Server::gSocketClose" alt="" coords="1561,375,1719,404"/><area shape="rect" id="node36" href="classServer.htm#a1e68e32745cdfe194e0af388d9d5244a" title="Server::sSocketClose" alt="" coords="1561,321,1719,351"/><area shape="rect" id="node44" href="classSocketClient.htm#a6b296c5002caa1229e7d7b9be6f08607" title="SocketClient::New" alt="" coords="1081,840,1217,869"/><area shape="rect" id="node69" href="classSocketClient.htm#a920016d3ec4026b7cdfc1000cc8168cc" title="SocketClient::Update" alt="" coords="848,948,1005,977"/><area shape="rect" id="node48" href="classSocket.htm#adc72a37934a4f2d10f6ae8fc94bb4ca7" title="Socket::gHostname" alt="" coords="1565,1316,1715,1345"/><area shape="rect" id="node50" href="classSocket.htm#accd94dbf518b30cdd878a9710d3c481c" title="Socket::gPort" alt="" coords="1349,840,1456,869"/><area shape="rect" id="node53" href="classSocketClient.htm#a6268f3d184970ec0076da657c39d2e80" title="SocketClient::Send" alt="" coords="1332,1157,1473,1187"/><area shape="rect" id="node65" href="classSocket.htm#a24c8132ced233add89f4fda68284e578" title="Socket::sPort" alt="" coords="1349,893,1456,923"/><area shape="rect" id="node67" href="classSocketClient.htm#ab5e6737c8acd4aaa21268e10c1a050b4" title="SocketClient::sState" alt="" coords="1327,947,1479,976"/><area shape="rect" id="node55" href="classSocket.htm#a3bb9f40d6e5f32cfa960a86323322c0c" title="Socket::gBytesSent" alt="" coords="1567,1103,1713,1132"/><area shape="rect" id="node59" href="classServer.htm#a2f8f36b615b6d10eb96dd35620ffd524" title="Server::gSocket" alt="" coords="1579,1263,1701,1292"/><area shape="rect" id="node61" href="classSocket.htm#a4966e11df7fca3a810cad1cc7091af5e" title="Socket::sBytesSent" alt="" coords="1567,1156,1713,1185"/><area shape="rect" id="node73" href="classSocketClient.htm#a9c982fdda7a3daa5b153eada40a3b6fb" title="SocketClient::gIdle" alt="" coords="1080,895,1219,924"/><area shape="rect" id="node75" href="classSocketClient.htm#a074944c7006f994646ed22cb2c955dc9" title="SocketClient::gServer" alt="" coords="1069,948,1229,977"/><area shape="rect" id="node77" href="classSocketClient.htm#a92fea2bf7e0f20578404ce1abb835a0b" title="SocketClient::ProcessInput" alt="" coords="1053,1104,1245,1133"/><area shape="rect" id="node87" href="classSocketClient.htm#a9ee09f452d900e288b2aa187561ef05d" title="SocketClient::Recv" alt="" coords="1333,1517,1472,1547"/><area shape="rect" id="node96" href="classSocketClient.htm#a686aea73a8e9c9dbaac6438ec1b24293" title="SocketClient::sIdle" alt="" coords="1571,1569,1709,1599"/><area shape="rect" id="node101" href="classSocketClient.htm#a472a64c9b811361791c107498eebf57a" title="SocketClient::Send" alt="" coords="1332,1000,1473,1029"/><area shape="rect" id="node80" href="classSocketClient.htm#aa3c0d7886b8fede981c73031cfaf17c6" title="SocketClient::QueueCommand" alt="" coords="1293,1104,1512,1133"/><area shape="rect" id="node84" href="namespaceUtils.htm#a8c70e85acdb1549aa4cd3a16b8d8d9cf" title="Utils::StrNewlines" alt="" coords="1336,1312,1469,1341"/><area shape="rect" id="node89" href="classSocket.htm#ad7ac03a288e6ef47a45e6837f7fef002" title="Socket::gBytesRecvd" alt="" coords="1563,1463,1717,1492"/><area shape="rect" id="node94" href="classSocket.htm#a150a2ba8da11a6934d6943613ba011ec" title="Socket::sBytesRecvd" alt="" coords="1563,1516,1717,1545"/></map>
</div>
</p>

<p><div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classSocketServer_a613401f64ca4c185e0a90dd2ae57b546_icgraph.png" border="0" usemap="#classSocketServer_a613401f64ca4c185e0a90dd2ae57b546_icgraph" alt=""/></div>
<map name="classSocketServer_a613401f64ca4c185e0a90dd2ae57b546_icgraph" id="classSocketServer_a613401f64ca4c185e0a90dd2ae57b546_icgraph">
<area shape="rect" id="node3" href="classServer.htm#a84ed4b0103f83fe0ece0a89983d0787a" title="Server::Startup" alt="" coords="213,5,333,35"/><area shape="rect" id="node5" href="main_8cpp.htm#ad53223b8779f25caeddb70a3b9172967" title="main" alt="" coords="383,5,436,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abf0a57a793cb3cf9ad308c238329b690"></a><!-- doxytag: member="SocketServer::Update" ref="abf0a57a793cb3cf9ad308c238329b690" args="(void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * SocketServer::Update </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="socketserver_8cpp_source.htm#l00215">215</a> of file <a class="el" href="socketserver_8cpp_source.htm">socketserver.cpp</a>.</p>

<p>References <a class="el" href="socketserver_8cpp_source.htm#l00026">Accept()</a>, <a class="el" href="socketserver_8cpp_source.htm#l00102">Delete()</a>, <a class="el" href="socketserver_8h_source.htm#l00038">gServer()</a>, <a class="el" href="macros_8h_source.htm#l00073">LOGSTR</a>, <a class="el" href="server_8h_source.htm#l00035">Server::Running()</a>, <a class="el" href="macros_8h_source.htm#l00070">UFLAGS_DE</a>, <a class="el" href="macros_8h_source.htm#l00083">USLEEP_MAX</a>, and <a class="el" href="socket_8h_source.htm#l00031">Socket::Valid()</a>.</p>

<p>Referenced by <a class="el" href="socketserver_8cpp_source.htm#l00168">Thread()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="macros_8h.htm#a56f9e62010649bf59e47724b826e3502">UFLAGS_DE</a>( flags );
    <a class="code" href="classSocketServer.htm">SocketServer</a>* socket_server = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classSocketServer.htm">SocketServer</a>*<span class="keyword">&gt;</span>( data );

    <span class="keywordflow">if</span> ( !socket_server-&gt;<a class="code" href="classSocket.htm#a508457b48e6296d1e86c7cc72af65948">Valid</a>() )
    {
        <a class="code" href="macros_8h.htm#acd5f0d05a4501b560a2fbc0799039598">LOGSTR</a>( flags, <span class="stringliteral">&quot;SocketServer::Update()-&gt; called with invalid socket&quot;</span> );
        socket_server-&gt;<a class="code" href="classSocketServer.htm#a4fb2589ed01cea5daae154b2f06b4f41">Delete</a>();
    }

    <span class="keywordflow">for</span> ( ;; )
    {
        <span class="comment">// Look for new connections</span>
        socket_server-&gt;<a class="code" href="classSocketServer.htm#afdbc60c3bc840875d2214b59c6213f63">Accept</a>();

        <span class="keywordflow">if</span> ( !socket_server-&gt;<a class="code" href="classSocketServer.htm#a659e5775db60e3f8d29b70f2fdd317e7">gServer</a>()-&gt;<a class="code" href="classServer.htm#ae3d4d866381050c00f383248872877ea">Running</a>() )
            <span class="keywordflow">break</span>;

        ::usleep( <a class="code" href="macros_8h.htm#a5fc45be6b0bb71dc5d4c6390d98bf3ee">USLEEP_MAX</a> / CFG_GAM_PULSE_RATE );
    }

    socket_server-&gt;<a class="code" href="classSocketServer.htm#a4fb2589ed01cea5daae154b2f06b4f41">Delete</a>();
    ::pthread_exit( <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>( EXIT_SUCCESS ) );
}
</pre></div></p>

<p><div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classSocketServer_abf0a57a793cb3cf9ad308c238329b690_cgraph.png" border="0" usemap="#classSocketServer_abf0a57a793cb3cf9ad308c238329b690_cgraph" alt=""/></div>
<map name="classSocketServer_abf0a57a793cb3cf9ad308c238329b690_cgraph" id="classSocketServer_abf0a57a793cb3cf9ad308c238329b690_cgraph">
<area shape="rect" id="node3" href="classSocketServer.htm#afdbc60c3bc840875d2214b59c6213f63" title="SocketServer::Accept" alt="" coords="216,497,376,527"/><area shape="rect" id="node13" href="classSocket.htm#a508457b48e6296d1e86c7cc72af65948" title="Socket::Valid" alt="" coords="1380,313,1484,343"/><area shape="rect" id="node17" href="classSocketServer.htm#a659e5775db60e3f8d29b70f2fdd317e7" title="SocketServer::gServer" alt="" coords="425,728,591,757"/><area shape="rect" id="node77" href="classServer.htm#ae3d4d866381050c00f383248872877ea" title="Server::Running" alt="" coords="880,1096,1003,1125"/><area shape="rect" id="node87" href="classSocketServer.htm#a4fb2589ed01cea5daae154b2f06b4f41" title="SocketServer::Delete" alt="" coords="1116,5,1273,35"/><area shape="rect" id="node5" href="classSocketClient.htm#af09328648d18ae943c8866cf744e5aad" title="SocketClient::Delete" alt="" coords="1119,59,1271,88"/><area shape="rect" id="node15" href="classSocket.htm#a45d3aa99d71b868921543a4708471f82" title="Socket::gDescriptor" alt="" coords="1359,651,1505,680"/><area shape="rect" id="node19" href="classSocketClient.htm#aa304eafc5814ed2ebda33c44ccb60316" title="SocketClient::Thread" alt="" coords="431,497,585,527"/><area shape="rect" id="node7" href="classServer.htm#a01c4cacfdade91bc99d6c8911ca33a54" title="Server::gSocketClose" alt="" coords="1353,59,1511,88"/><area shape="rect" id="node9" href="classThread.htm#a975e77d37e7955c21155bfe4b9ddc7d1" title="Thread::MutexLock" alt="" coords="1361,112,1503,141"/><area shape="rect" id="node11" href="classServer.htm#a1e68e32745cdfe194e0af388d9d5244a" title="Server::sSocketClose" alt="" coords="1353,5,1511,35"/><area shape="rect" id="node21" href="classSocketClient.htm#a6b296c5002caa1229e7d7b9be6f08607" title="SocketClient::New" alt="" coords="873,859,1009,888"/><area shape="rect" id="node47" href="classSocketClient.htm#a920016d3ec4026b7cdfc1000cc8168cc" title="SocketClient::Update" alt="" coords="640,497,797,527"/><area shape="rect" id="node25" href="classSocket.htm#adc72a37934a4f2d10f6ae8fc94bb4ca7" title="Socket::gHostname" alt="" coords="1357,1148,1507,1177"/><area shape="rect" id="node27" href="classSocket.htm#accd94dbf518b30cdd878a9710d3c481c" title="Socket::gPort" alt="" coords="1141,832,1248,861"/><area shape="rect" id="node30" href="classSocketClient.htm#a6268f3d184970ec0076da657c39d2e80" title="SocketClient::Send" alt="" coords="1124,1096,1265,1125"/><area shape="rect" id="node41" href="classSocket.htm#a14e5e2493abcae97043297dd170e7a39" title="Socket::sHostname" alt="" coords="1121,885,1268,915"/><area shape="rect" id="node43" href="classSocket.htm#a24c8132ced233add89f4fda68284e578" title="Socket::sPort" alt="" coords="1141,939,1248,968"/><area shape="rect" id="node45" href="classSocketClient.htm#ab5e6737c8acd4aaa21268e10c1a050b4" title="SocketClient::sState" alt="" coords="1119,992,1271,1021"/><area shape="rect" id="node32" href="classSocket.htm#a3bb9f40d6e5f32cfa960a86323322c0c" title="Socket::gBytesSent" alt="" coords="1359,1041,1505,1071"/><area shape="rect" id="node36" href="classServer.htm#a2f8f36b615b6d10eb96dd35620ffd524" title="Server::gSocket" alt="" coords="1371,948,1493,977"/><area shape="rect" id="node38" href="classSocket.htm#a4966e11df7fca3a810cad1cc7091af5e" title="Socket::sBytesSent" alt="" coords="1359,1095,1505,1124"/><area shape="rect" id="node51" href="classSocketClient.htm#a9c982fdda7a3daa5b153eada40a3b6fb" title="SocketClient::gIdle" alt="" coords="872,365,1011,395"/><area shape="rect" id="node53" href="classSocketClient.htm#a074944c7006f994646ed22cb2c955dc9" title="SocketClient::gServer" alt="" coords="861,419,1021,448"/><area shape="rect" id="node55" href="classSocketClient.htm#a92fea2bf7e0f20578404ce1abb835a0b" title="SocketClient::ProcessInput" alt="" coords="845,472,1037,501"/><area shape="rect" id="node65" href="classSocketClient.htm#a9ee09f452d900e288b2aa187561ef05d" title="SocketClient::Recv" alt="" coords="1125,779,1264,808"/><area shape="rect" id="node74" href="classSocketClient.htm#a686aea73a8e9c9dbaac6438ec1b24293" title="SocketClient::sIdle" alt="" coords="1363,871,1501,900"/><area shape="rect" id="node79" href="classSocketClient.htm#a472a64c9b811361791c107498eebf57a" title="SocketClient::Send" alt="" coords="1124,573,1265,603"/><area shape="rect" id="node58" href="classSocketClient.htm#aa3c0d7886b8fede981c73031cfaf17c6" title="SocketClient::QueueCommand" alt="" coords="1085,469,1304,499"/><area shape="rect" id="node62" href="namespaceUtils.htm#a8c70e85acdb1549aa4cd3a16b8d8d9cf" title="Utils::StrNewlines" alt="" coords="1128,365,1261,395"/><area shape="rect" id="node67" href="classSocket.htm#ad7ac03a288e6ef47a45e6837f7fef002" title="Socket::gBytesRecvd" alt="" coords="1355,752,1509,781"/><area shape="rect" id="node72" href="classSocket.htm#a150a2ba8da11a6934d6943613ba011ec" title="Socket::sBytesRecvd" alt="" coords="1355,805,1509,835"/></map>
</div>
</p>

<p><div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classSocketServer_abf0a57a793cb3cf9ad308c238329b690_icgraph.png" border="0" usemap="#classSocketServer_abf0a57a793cb3cf9ad308c238329b690_icgraph" alt=""/></div>
<map name="classSocketServer_abf0a57a793cb3cf9ad308c238329b690_icgraph" id="classSocketServer_abf0a57a793cb3cf9ad308c238329b690_icgraph">
<area shape="rect" id="node3" href="classSocketServer.htm#a613401f64ca4c185e0a90dd2ae57b546" title="SocketServer::Thread" alt="" coords="216,5,376,35"/><area shape="rect" id="node5" href="classServer.htm#a84ed4b0103f83fe0ece0a89983d0787a" title="Server::Startup" alt="" coords="424,5,544,35"/><area shape="rect" id="node7" href="main_8cpp.htm#ad53223b8779f25caeddb70a3b9172967" title="main" alt="" coords="593,5,647,35"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="abe9a0d62586891e9d8449c0f4d1ca97b"></a><!-- doxytag: member="SocketServer::m_server" ref="abe9a0d62586891e9d8449c0f4d1ca97b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classServer.htm">Server</a>* <a class="el" href="classSocketServer.htm#abe9a0d62586891e9d8449c0f4d1ca97b">SocketServer::m_server</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="socketserver_8h_source.htm#l00044">44</a> of file <a class="el" href="socketserver_8h_source.htm">socketserver.h</a>.</p>

<p>Referenced by <a class="el" href="socketserver_8cpp_source.htm#l00102">Delete()</a>, <a class="el" href="socketserver_8h_source.htm#l00038">gServer()</a>, <a class="el" href="socketserver_8cpp_source.htm#l00139">New()</a>, <a class="el" href="socketserver_8cpp_source.htm#l00265">SocketServer()</a>, and <a class="el" href="socketserver_8cpp_source.htm#l00244">sServer()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>h/<a class="el" href="socketserver_8h_source.htm">socketserver.h</a></li>
<li><a class="el" href="socketserver_8cpp_source.htm">socketserver.cpp</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Sat Apr 14 2012 23:46:16 for NAMS - Not Another MUD Server by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
